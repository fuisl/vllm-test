events {}
http {
  upstream chat { server vllm-chat:8000; }
  upstream embed { server vllm-embed:8000; }

  server {
    listen 80;

    location /v1/chat/completions { proxy_pass http://chat; }
    location /v1/completions      { proxy_pass http://chat; }
    location /v1/embeddings       { proxy_pass http://embed; }

    location = /v1/health { return 200 "ok\n"; }
  }
}
